#include<iostream>
#include "tcpsocket.hpp"

int main(int argc, char* argv[])
{
	if(argc != 3)
	{
		std::cout << "ip port error" << std::endl;
		return -1;
	}
	std::string srv_ip = argv[1];
	uint16_t srv_port = std::stoi(arcv[2]);
	TcpSocket sock;
	CHECK_RET(sock.Socket());
	CHECK_RET(sock.Connect(srv_ip, srv_port));
	while(1)
	{
		std::string buf;
		std::cout << "client say: ";
		std::cin >> buf;
		sock.send(buf);
		buf.clear();
		sock.Recv(&buf);
		std::cout << "server say: " << buf << std::endl;
	}
	sock.close();
	return 0;
}
